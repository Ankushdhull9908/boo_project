<!DOCTYPE html>
<html lang="en">
<head>
   
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cancel Order</title>
    <style>
        *{
            padding: 0;
            margin: 0;
            font-family: Arial, Helvetica, sans-serif;
        }

        .container {
            display: flex;
            flex-direction: row;
            justify-content: space-around;
            align-items: center;
            height: 100vh; 
            width: 100%;
            background-color: lightblue; 
        }

        .adOfreturn{
            display: flex;
            flex-direction: column;
            justify-content: space-between;

            position: relative;
            height: 70%;
            width: 40%;
            
            bottom: 3%;
        }

        

        .returnImage{
            height: 50%;
            width: 100%;
            background-color: aquamarine;
        }

        .returnImage img{
            height: 100%;
            width: 100%;
        }

        .order-summary-form-button {
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            align-items: center;
            height: 80%; 
            width: 40%;
          
            margin: 0 120px;
        }

        .order-summary-box{
            display: flex;
            justify-content: space-around;
            height: 30%;
            width: 100%;
            background-color: whitesmoke;
        }

        .form {
    height: auto;
    width: 80%;
    background-color: whitesmoke;
    padding: 20px;
    box-sizing: border-box;
    border-radius: 10px; /* Add rounded corners for better appearance */
}

.form form{
    margin: auto;
}

.form input[type="text"] {
    height: 40px;
    width: 100%;
    margin-bottom: 15px;
    padding: 10px;
    box-sizing: border-box;
    border: none;
    border-radius: 5px;
    background-color: #f0f0f0; /* Light gray background */
}



.form textarea {
    height: 80px;
    width: 100%;
    margin-bottom: 15px;
    padding: 10px;
    resize: none; /* Disable resizing */
    box-sizing: border-box;
    border: none;
    border-radius: 5px;
    background-color: #f0f0f0; /* Light gray background */
}

.form textarea:focus {
    outline: none; /* Remove outline on focus */
}

.form button {
    height: 40px;
    width: 100%;
    background-color: #4CAF50; /* Green */
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.form button:hover {
    background-color: #45a049; /* Darker green on hover */
}

        

        .returnHorizontalBox{
            height: 40%;
            width: 100%;
            background-color: green;
        }

        .returnHorizontalBox img{
            height: 100%;
            width: 100%;
        }

        .order-summary-image{
            height: 100%;
            width: 25%;
           
        }

        .order-summary-image img{
            height: 100%;
            width: 100%;
        }

        .details-box{
            height: 90%;
            width: 60%;
         
        }
        .book_name{
            height: 20%;
            width: 100%;
         
            display: flex;
            align-items: center;

        }

        .book_name p{
            font-size: 22px;
        }

        .authorname{
            height: 20%;
            width: 100%;
          
            display: flex;
            align-items: center;
        }

        .price{
            height: 20%;
            width: 100%;
           
            display: flex;
            align-items: center;
        }

        .order_id{
            height: 20%;
            width: 100%;
           
            display: flex;
            align-items: center;
        }

        .date{
            height: 20%;
            width: 100%;
           
            display: flex;
            align-items: center;

        }
 
        .price p{
            font-weight: 600;
            color: red;
        }

        #payment-id{
            height: 30%;
            width: 40%;
            outline: none;
        }

        #refund-amount{
            height: 30%;
            width: 40%;
            outline: none;

        }

       


    </style>
</head>
<body>
    <div class="container">
        <div class="order-summary-form-button">
            <div class="order-summary-box">

            </div>
            
            <div class="form">
                <div class="form">
                    <form id="refundForm" class="refund-form" method="post" action="/refund">
                        <input type="text" id="payment-id" name="payment_id" placeholder="Payment ID" readonly>
                        <input type="text" id="refund-amount" name="refund_amount" placeholder="Refund Amount">
                        <div class="refund-reason">
                            <input type="checkbox" id="reason-quality" name="refund_reason" value="Quality Issue">
                            <label for="reason-quality">Quality Issue</label><br>
                            <input type="checkbox" id="reason-damaged" name="refund_reason" value="Item Damaged">
                            <label for="reason-damaged">Item Damaged</label><br>
                            <input type="checkbox" id="reason-wrong" name="refund_reason" value="Wrong Item">
                            <label for="reason-wrong">Wrong Item</label><br>
                        </div>
                        <textarea id="refund-description" name="refund_description" placeholder="Specify Reason" required></textarea>
                        <button type="submit" id="sbt">Submit</button>
                    </form>
                </div>

            </div>
            
        </div>
        <div class="adOfreturn">
            <div class="returnImage">
                <img src="images/razorPayrefund.png">
            </div>

            <div class="returnHorizontalBox">
            
            <img src="images/return.jpg">
            </div>
        
        </div>

    </div>
   
</body>
<script src="https://checkout.razorpay.com/v1/checkout.js" ></script>
<script>
    //var orderId;
    var paymentId;
    var BookPrice;
    var rzp;

    window.onload = function(){
        var OrderCancelData = JSON.parse(window.localStorage.getItem('CanceOrderDetailsFromUserInterfacePage'));
        console.log(OrderCancelData)
        BookPrice = OrderCancelData[0].book_price
        var orderId = OrderCancelData[0].order_id
        paymentId = OrderCancelData[0].payment_id;
        document.getElementById("payment-id").value = paymentId
        document.getElementById("refund-amount").value = BookPrice;
        
        
        
        var value="";
        OrderCancelData.forEach(element => {
            value+= `
                <div class="order-summary-image">
                    <img src="${element.book_url}">
                </div>
                <div class="details-box">
                    <div class="book_name">
                        <p>NAME: ${element.book_name}</p>
                    </div>
                    <div class="authorname">
                        <p>Quantity:${element.book_quantity}</p>
                    </div>
                    <div class="price">
                        <p>PRICE: ${element.book_price}</p>
                    </div>
                    <div class="order_id">
                        <p>ID: ${element.order_id}</p>
                    </div>
                    <div class="date">
                        <p>DATE: ${element.order_datetime}</p>
                    </div>

                </div>
            
            `;
            document.querySelector(".order-summary-box").innerHTML = value;

        });
       
        
        fun(orderId)
    }

    function fun(orderId){
        var val1 = orderId
        document.getElementById("sbt").addEventListener("click",function(){
           

        window.localStorage.setItem("canceorderid",JSON.stringify(val1))
        })

    }

    



   
</script>
</html>
